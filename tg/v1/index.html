<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <title>WBExchangeSDK Integration</title>
    <style>
        :root {
            --tg-height: 100vh;
            --tg-stable-height: 100vh;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: var(--tg-height);
            margin: 0;
            background-color: #f0f0f0;
        }

        #wbExchangeSdkWrapper {
            width: 100%;
            height: 100%;
            border: 1px solid #ccc;
            background-color: #fff;
        }
    </style>
</head>
<body>
    <div id="wbExchangeSdkWrapper"></div>

    <script src="https://sdk.dev.wbdevel.net/v2.0/assets/sdk-demo/wbExchangeSdk-v001.js"></script>
    <script>
        function adjustHeight() {
            const tg = window.Telegram.WebApp;
            if (tg) {
                document.documentElement.style.setProperty('--tg-height', tg.viewportHeight + "px");
                document.documentElement.style.setProperty('--tg-stable-height', tg.viewportStableHeight + "px");
            }
        }

        document.addEventListener("DOMContentLoaded", function () {
            if (window.Telegram && window.Telegram.WebApp) {
                console.log("Telegram WebApp API загружен");
                console.log("initDataUnsafe:", window.Telegram.WebApp.initDataUnsafe);

                window.Telegram.WebApp.expand();
                adjustHeight();
            } else {
                console.log("Telegram WebApp API не найден");
            }

            wbExchangeSdk.setup({
                el: document.getElementById("wbExchangeSdkWrapper"),
                merchantId: '4f19017b-0793-4591-94ff-610bb3c4665b',
                mode: wbExchangeSdk.mode.LoginMode,
                showBackButtonOnHomePage: false,
                disableAddCard: false,
            });
        });

        window.addEventListener("resize", adjustHeight);
    </script>
</body>
</html>
